
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    body, html {width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
    p{margin-left:5px; font-size:14px;}
  </style>

	<title>pixi.js example 13</title>
	<style>
		body {
			margin: 0;
			padding: 0;
		}
	</style>

	<script src="js/pixi.js/bin/pixi.js"></script>

</head>
<body>
<div id="allmap"></div>
<script type="text/javascript">
var renderer = PIXI.autoDetectRenderer(1080, 1920);
document.body.appendChild(renderer.view);

// create the root of the scene graph
var stage = new PIXI.Container();
// background-image:'img/map.png';
// background-image: url("img/map.png");
var background = PIXI.Sprite.fromImage('img/map.png');
// background.width = 100%;
// background.height = 100%;
stage.interactive = true;
stage.addChild(background);

// create some textures from an image path
var textureButton = PIXI.Texture.fromImage('img/tower_blue.png');

var blueTower = PIXI.Texture.fromImage('img/tower_blue.png');
var redTower = PIXI.Texture.fromImage('img/tower_red.png');
var whiteTower = PIXI.Texture.fromImage('img/tower.png');

var textureButtonDown = PIXI.Texture.fromImage('img/tower_red.png');
var textureButtonOver = PIXI.Texture.fromImage('img/wolf.png');

var texturePeople = PIXI.Texture.fromImage('img/wolf.png');
var textureFire = PIXI.Texture.fromImage('img/people.png');

// create a new Sprite that uses the image name that we just generated as its source
var startPoint = PIXI.Sprite.fromImage('img/people1.png');
startPoint.anchor.set(0.5);
startPoint.scale.set(0.2);
startPoint.position.x= 100;
startPoint.position.y= 100;
stage.addChild(startPoint)

var endPoint = PIXI.Sprite.fromImage('img/people1.png');
endPoint.anchor.set(0.5);
endPoint.scale.set(0.2);
endPoint.position.x= 100;
endPoint.position.y= 500;
stage.addChild(endPoint)

var buttons = [];
var peoples = [];

var buttonPositions = [
    300, 100,
    655, 200,
    500, 325,
    150, 300,
    250, 600,
    300, 300
];

for (var t = 0; t < 10;t++){
  // var myDate = new Date();
  // myDate.getSeconds();
  var people = new PIXI.Sprite(texturePeople);
  peoplePosition = [400,400];
  people.buttonMode = true;
  people.anchor.set(0.5);
  people.position.x = peoplePosition[t*2];
  people.position.y = peoplePosition[t*2];i
  people.interactive = true;

  stage.addChild(people)
  peoples.push(people);
}

var noop = function () {
	console.log('click');
};

for (var i = 0; i < 5; i++)
{
    var button = new PIXI.Sprite(textureButton);
    button.buttonMode = true;
    button.anchor.set(0.5);

    button.position.x = buttonPositions[i*2];
    button.position.y = buttonPositions[i*2 + 1];

    // make the button interactive...
    button.interactive = true;
    button
        // set the mousedown and touchstart callback...
        .on('mousedown', onButtonDown)
        .on('touchstart', onButtonDown)

        // set the mouseup and touchend callback...
        .on('mouseup', onButtonUp)
        .on('touchend', onButtonUp)
        .on('mouseupoutside', onButtonUp)
        .on('touchendoutside', onButtonUp)

        // set the mouseover callback...
        .on('mouseover', onButtonOver)
        // set the mouseout callback...
        .on('mouseout', onButtonOut)
        // you can also listen to click and tap events :
        //.on('click', noop)

	button.tap = noop;
	button.click = noop;
    // add it to the stage
    stage.addChild(button);

    // add button to array
    buttons.push(button);
}

// set some silly values...
  buttons[0].scale.set(0.2);
  buttons[1].scale.set(0.2);
  buttons[2].scale.set(0.2);
  buttons[3].scale.set(0.2);
  buttons[4].scale.set(0.5);

// buttons[4].rotation = Math.PI;
// buttons[2].rotation = Math.PI / 10;

	// create a new Sprite that uses the image name that we just generated as its source

	var startPoint = PIXI.Sprite.fromImage('img/wolfwithcircle.png');
  	startPoint.anchor.set(0.5);
  	startPoint.scale.set(1);
  	startPoint.position.x= 100;
  	startPoint.position.y= 100;
  	stage.addChild(startPoint)

	var endPoint = PIXI.Sprite.fromImage('img/people1.png');
  	endPoint.anchor.set(0.5);
  	endPoint.scale.set(0.2);
  	endPoint.position.x= 100;
  	endPoint.position.y= 500;
  	stage.addChild(endPoint)

  var people = PIXI.Sprite.fromImage('img/wolfwithcircle.png');
    people.anchor.set(0.5);
  	people.scale.set(1);
  	people.position.x= startPoint.position.x;
  	people.position.y= startPoint.position.y;
    people.direction = 1 ;
    people.speed = 10 ;
    // aliens.push(people);
  	stage.addChild(people)
  // var peoples = []
  // var people =  PIXI.Sprite.fromImage('img/people.png');
  //   people.anchor.set(0.5);
  // 	people.scale.set(0.09);
  // 	people.position.x = people.position.x ;
  // 	people.position.y = people.position.y ;
  //   // people.direction = 1 ;
  // 	people.speed = 10 ;
  // 	peoples.push(people);
	//   stage.addChild(people);

    animate();

    requestAnimationFrame(animate);

function animate() {


  for (var x = 0; x < peoples.length; x++)
  {
    // console.log(i)
      var people = ps[];
      people.direction = (tower.position.y-people.position.y)/(tower.position.x-people.position.x);
      // people.position.x += people.direction * people.speed;
      people.position.x += x*people.speed;
      people.position.y += people.direction*people.speed;
      //

  }

    // render the stage
    renderer.render(stage);

    requestAnimationFrame(animate);
}

	</script>

	</body>
</html>
